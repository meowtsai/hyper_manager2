(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{1060:function(e,t,n){"use strict";n.r(t);var a=n(72),r=n(2),c=n(18),l=n(168),u=n(3),i=n.n(u),m=n(55),o=n(406),d=n(164),s=n(165),f=n(176),b=n(174),E=n(179),g=n(175),v=n(219),p=n(144),h=n(232),y=n(233),_=n(229),k=n(234),N=n(235),O=n(159),j=n(160),S=n(178),D=n(121),I=n.n(D),w=n(150),C=n(126),H=n(218);t.default=Object(m.b)(function(e){return{antsHandleData:e.Service.antsHandleData,csHandleData:e.Service.csHandleData,qCountData:e.Service.qCountData,csHandleAllocationData:e.Service.csHandleAllocationData,antsHandleAllocationData:e.Service.antsHandleAllocationData,question_type:e.Service.question_type,allgames:e.Service.allgames,loading:e.Service.loading,error:e.Service.error,user:e.Auth.user}},{getServiceStatistics:w.hb})(function(e){var t=e.getServiceStatistics,n=e.antsHandleData,a=e.csHandleData,r=e.qCountData,m=e.csHandleAllocationData,D=e.antsHandleAllocationData,w=e.question_type,F=e.loading,x=e.allgames,A=(e.error,e.user),z=Object(u.useState)("all_game"),G=Object(l.a)(z,2),M=G[0],T=G[1],J=Object(u.useState)("\u5168\u7522\u54c1"),B=Object(l.a)(J,2),L=B[0],V=B[1],Y=Object(u.useState)("".concat((new Date).getFullYear(),"-").concat(((new Date).getMonth()+1).toString().padStart(2,"0"))),K=Object(l.a)(Y,2),P=K[0],Q=K[1],W=Object(u.useState)("all"),R=Object(l.a)(W,2),U=R[0],X=R[1],Z=Object(u.useState)("1"),$=Object(l.a)(Z,2),ee=$[0],te=$[1];Object(u.useEffect)(function(){t(P),document.title="\u5ba2\u670d\u6848\u4ef6\u7d71\u8a08"},[]);if(F)return i.a.createElement(H.a,{className:"m-2",color:"secondary"});var ne=[],ae=new Date,re=ae.getMonth(),ce=ae.getFullYear();ne.push("".concat(ce,"-").concat((re+1).toString().padStart(2,"0")));for(var le=0;le<5;le++){var ue=ce,ie=re-le;ie<=0&&(ie=12-le,ue=ce-1),ne.push("".concat(ue,"-").concat(ie.toString().padStart(2,"0")))}var me=function(e){var t=[];return"all_game"===e?r.reduce(function(e,n){if(t.indexOf(n.\u6642\u9593)<0)return t.push(n.\u6642\u9593),[].concat(Object(c.a)(e),[{"\u6642\u9593":n.\u6642\u9593,cnt:n.cnt}]);var a=e.filter(function(e){return e.\u6642\u9593===n.\u6642\u9593})[0];return[].concat(Object(c.a)(e.filter(function(e){return e.\u6642\u9593!==n.\u6642\u9593})),[{"\u6642\u9593":n.\u6642\u9593,cnt:n.cnt+a.cnt}])},[]).sort(function(e,t){return e.\u6642\u9593<t.\u6642\u9593?-1:e.\u6642\u9593>t.\u6642\u9593?1:void 0}):r.filter(function(t){return t.game_id===e})};return i.a.createElement(u.Fragment,null,i.a.createElement(C.a,{breadCrumbItems:[{label:"\u5ba2\u670d",path:"/service",active:!1},{label:"\u5ba2\u670d\u6848\u4ef6\u7d71\u8a08",path:"/service",active:!0}],title:"\u5ba2\u670d\u6848\u4ef6\u7d71\u8a08"}),i.a.createElement(d.a,{className:"mt-2"},i.a.createElement(s.a,{md:6,sm:6},x.length>0&&i.a.createElement(f.a,{inline:!0,className:"mb-2"},i.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},i.a.createElement(E.a,{htmlFor:"selGameId",className:"mr-sm-2"},"\u904a\u6232:"),i.a.createElement(g.a,{type:"select",name:"selGameId",id:"selGameId",className:"custom-select",value:M,onChange:function(e){var t;""!==(t=e.target.value)&&void 0!==t&&null!==t&&(T(t),V("all_game"===t?"\u5168\u7522\u54c1":x.filter(function(e){return e.game_id===t})[0].game_name))}},i.a.createElement("option",{value:""},"\u9078\u64c7\u904a\u6232..."),i.a.createElement("option",{value:"all_game"},"\u5168\u7522\u54c1"),x.map(function(e){return i.a.createElement("option",{key:"game-"+e.game_id,value:e.game_id},e.game_name)}))),i.a.createElement(v.a,{className:"btn-group mb-2 ml-3"},i.a.createElement(p.a,{onClick:function(e){return X("all")},color:"all"===U?"danger":"light"},"by \u65e5\u671f + \u4eba\u54e1"),i.a.createElement(p.a,{onClick:function(e){return X("date")},color:"date"===U?"danger":"light"},"by \u65e5\u671f"),i.a.createElement(p.a,{onClick:function(e){return X("user")},color:"user"===U?"danger":"light"},"by \u4eba\u54e1")))),i.a.createElement(s.a,{md:6,sm:6},i.a.createElement(f.a,{inline:!0,className:"mb-2  float-right"},i.a.createElement(b.a,{className:"mb-2 mr-sm-2 mb-sm-0"},i.a.createElement(E.a,{htmlFor:"selMonth",className:"mr-sm-2"},"\u6708\u4efd:"),i.a.createElement(g.a,{type:"select",name:"selMonth",id:"selMonth",className:"custom-select",value:P,onChange:function(e){return Q(e.target.value)}},ne.map(function(e){return i.a.createElement("option",{key:"yymm-"+e,value:e},e)}))),i.a.createElement(p.a,{color:"primary",className:"mb-2 mr-1",onClick:function(){t(P)}},"\u641c\u5c0b")))),i.a.createElement(d.a,null,i.a.createElement(s.a,{lg:12},i.a.createElement(h.a,{tabs:!0,className:"nav-bordered"},[{id:"1",title:"\u63d0\u554f\u55ae",icon:"mdi mdi-home-variant"},{id:"2",title:"\u5f8c\u9001\u6848\u4ef6",icon:"mdi mdi-account-circle"}].map(function(e,t){return i.a.createElement(y.a,{key:"tab_".concat(t)},i.a.createElement(_.a,{href:"#",className:I()({active:ee===e.id}),onClick:function(){!function(e){ee!==e&&te(e)}(e.id)}},i.a.createElement("i",{className:I()(e.icon,"d-lg-none","d-block","mr-1")}),i.a.createElement("span",{className:"d-none d-lg-block"},e.title)))})))),i.a.createElement(k.a,{activeTab:ee},i.a.createElement(N.a,{tabId:"1"},i.a.createElement(d.a,{className:"mb-2"},i.a.createElement(s.a,{lg:4},r.length>0&&i.a.createElement(o.CSVLink,{data:me(M),headers:"all_game"===M?[{label:"\u65e5\u671f",key:"\u6642\u9593"},{label:"\u6578\u91cf",key:"cnt"}]:[{label:"\u65e5\u671f",key:"\u6642\u9593"},{label:"\u6578\u91cf",key:"cnt"}].concat(Object(c.a)(Object.keys(w).map(function(e){return{label:w[e],key:w[e]}}))),filename:L+P+"\u63d0\u554f\u55ae\u9032\u4ef6\u91cf"+(new Date).getTime()+".csv"},"\u4e0b\u8f09 csv\u6a94\u6848"),r&&i.a.createElement(O.a,null,i.a.createElement(j.a,null,i.a.createElement("h4",{className:"header-title"},L,"-\u63d0\u554f\u55ae\u9032\u4ef6\u91cf"),i.a.createElement(S.a,{className:"mb-0",bordered:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"\u65e5\u671f"),i.a.createElement("th",null,"\u6578\u91cf"))),i.a.createElement("tbody",null,me(M).map(function(e,t){return i.a.createElement("tr",{key:"q_".concat(t)},i.a.createElement("th",null,e.\u6642\u9593),i.a.createElement("td",null,e.cnt))}),i.a.createElement("tr",null,i.a.createElement("th",null,"\u7e3d\u8a08"),i.a.createElement("td",null,("all_game"===M?r:r.filter(function(e){return e.game_id===M})).reduce(function(e,t){return e+t.cnt},0)))))))),i.a.createElement(s.a,{lg:4},q(n,"".concat(L,"-\u87fb\u529b\u63d0\u554f\u55ae\u8655\u7406\u91cf"),M,P,U,w)),i.a.createElement(s.a,{lg:4},q(a,"".concat(L,"-\u5ba2\u670d\u63d0\u554f\u55ae\u8655\u7406\u91cf"),M,P,U,w)))),i.a.createElement(N.a,{tabId:"2"},i.a.createElement(d.a,{className:"mb-2"},i.a.createElement(s.a,{lg:4},q(D,"".concat(L,"-\u87fb\u529b\u5f8c\u9001\u6848\u4ef6\u91cf"),M,P,U,{})),("admin"===A.role||"pm"===A.role)&&i.a.createElement(s.a,{lg:4},q(m,"".concat(L,"-\u5ba2\u670d\u5f8c\u9001\u8655\u7406\u91cf"),M,P,U,{}))))))});var q=function(e,t,n,l,m,d){var s=[],f=("all_game"===n?e.reduce(function(e,t){if(s.indexOf(t.\u6642\u9593+t.admin_name)<0)return s.push(t.\u6642\u9593+t.admin_name),[].concat(Object(c.a)(e),[Object(r.a)({},t)]);var n=e.filter(function(e){return e.\u6642\u9593===t.\u6642\u9593&&e.admin_name===t.admin_name})[0];return[].concat(Object(c.a)(e.filter(function(e){return e.admin_name!==t.admin_name||e.\u6642\u9593!==t.\u6642\u9593})),[Object(r.a)({},t,{test_cnt:Number.parseInt(t.test_cnt)+Number.parseInt(n.test_cnt),cnt:Number.parseInt(t.cnt)+Number.parseInt(n.cnt)})])},[]).sort(function(e,t){return e.\u6642\u9593<t.\u6642\u9593?-1:e.\u6642\u9593>t.\u6642\u9593?1:void 0}):e.filter(function(e){return e.game_id===n})).map(function(e){return Object(r.a)({dt:e.\u6642\u9593,admin_name:e.admin_name,admin_uid:e.admin_uid,test_cnt:e.test_cnt,cnt:e.cnt},e)}),b=[],E="all"===m?"all":"date"===m?"dt":"admin_name",g="all"===m?"\u65e5\u671f":"\u4eba\u54e1",v="all"===E?f:f.reduce(function(e,t){return b.indexOf(t[E])<0?(b.push(t[E]),[].concat(Object(c.a)(e),[Object(r.a)({},t)])):e=e.map(function(e){var n;return e[E]===t[E]?(n={},Object(a.a)(n,E,e[E]),Object(a.a)(n,"test_cnt",Number.parseInt(e.test_cnt)+Number.parseInt(t.test_cnt)),Object(a.a)(n,"cnt",Number.parseInt(e.cnt)+Number.parseInt(t.cnt)),n):e})},[]);return i.a.createElement(u.Fragment,null,i.a.createElement(o.CSVLink,{data:f,headers:"all_game"===n?[{label:"\u65e5\u671f",key:"dt"},{label:"\u4eba\u54e1",key:"admin_name"},{label:"\u6578\u91cf",key:"cnt"},{label:"\u6e2c\u8a66",key:"test_cnt"}]:[{label:"\u65e5\u671f",key:"dt"},{label:"\u4eba\u54e1",key:"admin_name"},{label:"\u6578\u91cf",key:"cnt"},{label:"\u6e2c\u8a66",key:"test_cnt"}].concat(Object(c.a)(Object.keys(d).map(function(e){return{label:d[e],key:d[e]}}))),filename:t+l+(new Date).getTime()+".csv"},"\u4e0b\u8f09 csv\u6a94\u6848"),i.a.createElement(O.a,null,i.a.createElement(j.a,null,i.a.createElement("h4",{className:"header-title"},t," "),i.a.createElement(S.a,{className:"mb-0",bordered:!0,size:"sm"},i.a.createElement("thead",null,i.a.createElement("tr",null,"all"===m?i.a.createElement(u.Fragment,null,i.a.createElement("th",null,"\u65e5\u671f")," ",i.a.createElement("th",null,"\u4eba\u54e1")):i.a.createElement("th",null,g),i.a.createElement("th",null,"\u6578\u91cf"),0!==Object.keys(d).length&&i.a.createElement("th",null,"\u6e2c\u8a66"))),i.a.createElement("tbody",null,v.map(function(e,a){return i.a.createElement("tr",{key:"q_".concat(a)},"all"===m?i.a.createElement(u.Fragment,null,i.a.createElement("th",null,e.dt)," ",i.a.createElement("th",null,e.admin_name)):i.a.createElement("th",null,e[E]),i.a.createElement("td",null,"all_game"===n&&"all"===m&&t.indexOf("\u5f8c\u9001")<0?i.a.createElement("a",{className:"text-info",href:"/service/questions/query?replyDate=".concat(e.dt,"&replyAdmin=").concat(e.admin_uid),target:"blank"}," ",e.cnt):e.cnt," "),0!==Object.keys(d).length&&i.a.createElement("td",null,e.test_cnt))}),i.a.createElement("tr",null,"all"===m?i.a.createElement(u.Fragment,null,i.a.createElement("th",{colSpan:"2"},"\u7e3d\u8a08")):i.a.createElement("th",null,"\u7e3d\u8a08"),i.a.createElement("td",null,v.reduce(function(e,t){return e+Number.parseInt(t.cnt)},0)),0!==Object.keys(d).length&&i.a.createElement("td",null,v.reduce(function(e,t){return e+Number.parseInt(t.test_cnt)},0))))))))}},126:function(e,t,n){"use strict";var a=n(3),r=n.n(a),c=n(52),l=n(164),u=n(165),i=n(153),m=n(154);n(26);t.a=function(e){return r.a.createElement(l.a,null,r.a.createElement(u.a,null,r.a.createElement("div",{className:"page-title-box"},r.a.createElement("div",{className:"page-title-right"},r.a.createElement(i.a,null,r.a.createElement(m.a,null,r.a.createElement(c.b,{to:"/"},"Hyper")),e.breadCrumbItems.map(function(e,t){return e.active?r.a.createElement(m.a,{active:!0,key:t},e.label):r.a.createElement(m.a,{key:t},r.a.createElement(c.b,{to:e.path},e.label))}))),r.a.createElement("h4",{className:"page-title"},e.title))))}},150:function(e,t,n){"use strict";var a=n(44);n.d(t,"M",function(){return a.a}),n.d(t,"tb",function(){return a.d}),n.d(t,"ub",function(){return a.g}),n.d(t,"Ab",function(){return a.h});var r=n(41);n.d(t,"i",function(){return r.a}),n.d(t,"j",function(){return r.b}),n.d(t,"k",function(){return r.c}),n.d(t,"l",function(){return r.d}),n.d(t,"rb",function(){return r.e});var c=n(53);n.d(t,"h",function(){return c.a}),n.d(t,"sb",function(){return c.c});var l=n(61);n.d(t,"X",function(){return l.a});var u=n(38);n.d(t,"q",function(){return u.a}),n.d(t,"A",function(){return u.b}),n.d(t,"I",function(){return u.e}),n.d(t,"bb",function(){return u.h}),n.d(t,"Gb",function(){return u.k});var i=n(17);n.d(t,"a",function(){return i.a}),n.d(t,"u",function(){return i.d}),n.d(t,"v",function(){return i.g}),n.d(t,"w",function(){return i.i}),n.d(t,"x",function(){return i.m}),n.d(t,"y",function(){return i.p}),n.d(t,"z",function(){return i.s}),n.d(t,"E",function(){return i.v}),n.d(t,"F",function(){return i.y}),n.d(t,"G",function(){return i.B}),n.d(t,"J",function(){return i.E}),n.d(t,"U",function(){return i.H}),n.d(t,"Z",function(){return i.K}),n.d(t,"vb",function(){return i.N});var m=n(45);n.d(t,"o",function(){return m.a}),n.d(t,"H",function(){return m.b}),n.d(t,"S",function(){return m.e}),n.d(t,"Y",function(){return m.h});var o=n(62);n.d(t,"fb",function(){return o.a});var d=n(46);n.d(t,"N",function(){return d.a}),n.d(t,"jb",function(){return d.d}),n.d(t,"kb",function(){return d.g});var s=n(27);n.d(t,"m",function(){return s.a}),n.d(t,"O",function(){return s.b}),n.d(t,"P",function(){return s.e}),n.d(t,"wb",function(){return s.h}),n.d(t,"xb",function(){return s.k}),n.d(t,"zb",function(){return s.n}),n.d(t,"Fb",function(){return s.q});var f=n(14);n.d(t,"b",function(){return f.a}),n.d(t,"c",function(){return f.d}),n.d(t,"d",function(){return f.g}),n.d(t,"f",function(){return f.h}),n.d(t,"p",function(){return f.k}),n.d(t,"s",function(){return f.l}),n.d(t,"L",function(){return f.o}),n.d(t,"T",function(){return f.r}),n.d(t,"ab",function(){return f.u}),n.d(t,"cb",function(){return f.x}),n.d(t,"db",function(){return f.y}),n.d(t,"gb",function(){return f.D}),n.d(t,"hb",function(){return f.F}),n.d(t,"ib",function(){return f.G}),n.d(t,"Db",function(){return f.N}),n.d(t,"Eb",function(){return f.Q}),n.d(t,"Hb",function(){return f.T}),n.d(t,"Ib",function(){return f.W});var b=n(23);n.d(t,"e",function(){return b.a}),n.d(t,"r",function(){return b.d}),n.d(t,"B",function(){return b.e}),n.d(t,"W",function(){return b.h}),n.d(t,"lb",function(){return b.k}),n.d(t,"mb",function(){return b.m}),n.d(t,"qb",function(){return b.p}),n.d(t,"yb",function(){return b.t}),n.d(t,"Jb",function(){return b.w});var E=n(28);n.d(t,"C",function(){return E.a}),n.d(t,"K",function(){return E.d}),n.d(t,"V",function(){return E.g}),n.d(t,"nb",function(){return E.j}),n.d(t,"ob",function(){return E.m}),n.d(t,"pb",function(){return E.p});var g=n(25);n.d(t,"g",function(){return g.a}),n.d(t,"n",function(){return g.d}),n.d(t,"t",function(){return g.e}),n.d(t,"D",function(){return g.h}),n.d(t,"Q",function(){return g.k}),n.d(t,"R",function(){return g.n}),n.d(t,"Bb",function(){return g.q}),n.d(t,"Cb",function(){return g.t});var v=n(63);n.d(t,"eb",function(){return v.a})},218:function(e,t,n){"use strict";var a=n(72),r=n(3),c=n.n(r),l=(n(26),n(121)),u=n.n(l),i=function(e){var t=e.children||null,n=e.tag;return c.a.createElement(n,{role:"status",className:u()({"spinner-border":"bordered"===e.type,"spinner-grow":"grow"===e.type},["text-".concat(e.color)],Object(a.a)({},"avatar-".concat(e.size),e.size),e.className)},t)};i.defaultProps={tag:"div",type:"bordered",color:"primary"},t.a=i}}]);
//# sourceMappingURL=109.568ffe41.chunk.js.map